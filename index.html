<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freedom Cabins NZ - Custom Configurator</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #474d60 0%, #3a3f50 50%, #2e3240 100%);
            min-height: 100vh;
            color: #c2c4ca;
        }
        
        .header {
            background: rgba(71, 77, 96, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(194, 196, 202, 0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 40;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #da8a67;
        }
        
        .live-price {
            background: linear-gradient(135deg, #da8a67, #c77a57);
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            color: white;
            box-shadow: 0 4px 15px rgba(218, 138, 103, 0.3);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .grid {
            display: grid;
            gap: 2rem;
            grid-template-columns: 1fr 400px;
        }
        
        .card {
            background: rgba(71, 77, 96, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(194, 196, 202, 0.1);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }
        
        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #c2c4ca;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .section-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(135deg, #da8a67, #c77a57);
            border-radius: 2px;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #c2c4ca;
        }
        
        .form-select, .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: rgba(58, 63, 80, 0.8);
            border: 1px solid rgba(194, 196, 202, 0.2);
            border-radius: 8px;
            color: #c2c4ca;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
        }
        
        .form-select:focus, .form-input:focus {
            outline: none;
            border-color: #da8a67;
            box-shadow: 0 0 0 3px rgba(218, 138, 103, 0.1);
            background: rgba(58, 63, 80, 1);
        }
        
        .form-select option {
            background: #474d60;
            color: #c2c4ca;
        }
        
        .cabin-spec {
            background: rgba(58, 63, 80, 0.4);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .spec-title {
            font-weight: 600;
            color: #da8a67;
            margin-bottom: 0.5rem;
        }
        
        .spec-details {
            font-size: 0.9rem;
            color: #9ca3af;
            line-height: 1.4;
        }
        
        .sidebar {
            position: sticky;
            top: 6rem;
            height: fit-content;
        }
        
        .quote-card {
            background: linear-gradient(135deg, rgba(218, 138, 103, 0.1), rgba(199, 122, 87, 0.1));
            border: 1px solid rgba(218, 138, 103, 0.3);
        }
        
        .price-display {
            font-size: 2.5rem;
            font-weight: 700;
            color: #da8a67;
            text-align: center;
            margin-bottom: 1rem;
            text-shadow: 0 2px 10px rgba(218, 138, 103, 0.3);
        }
        
        .price-breakdown {
            margin-bottom: 1rem;
        }
        
        .price-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(194, 196, 202, 0.1);
        }
        
        .price-item:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
            color: #da8a67;
        }
        
        .btn {
            width: 100%;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, #da8a67, #c77a57);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(218, 138, 103, 0.3);
            margin-top: 1.5rem;
            font-family: 'Montserrat', sans-serif;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(218, 138, 103, 0.4);
        }
        
        .cabin-preview {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, rgba(58, 63, 80, 0.8), rgba(71, 77, 96, 0.8));
            border: 2px dashed rgba(194, 196, 202, 0.3);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .cabin-preview::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" fill="none"><rect x="10" y="30" width="80" height="50" stroke="%23da8a67" stroke-width="2" fill="rgba(218,138,103,0.1)"/><polygon points="10,30 50,10 90,30" stroke="%23da8a67" stroke-width="2" fill="rgba(218,138,103,0.1)"/><rect x="20" y="40" width="15" height="20" stroke="%23da8a67" stroke-width="1" fill="rgba(218,138,103,0.05)"/><rect x="65" y="40" width="15" height="20" stroke="%23da8a67" stroke-width="1" fill="rgba(218,138,103,0.05)"/></svg>') center/contain no-repeat;
            opacity: 0.6;
        }
        
        .preview-text {
            color: #9ca3af;
            text-align: center;
            z-index: 1;
        }
        
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            z-index: 50;
            overflow-y: auto;
        }
        
        .modal-content {
            background: rgba(71, 77, 96, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(194, 196, 202, 0.2);
            border-radius: 16px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            margin: auto;
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #c2c4ca;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .close-btn:hover {
            background: rgba(194, 196, 202, 0.1);
            color: #c2c4ca;
        }
        
        .upgrade-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(194, 196, 202, 0.1);
        }
        
        .upgrade-section:last-child {
            border-bottom: none;
        }
        
        .upgrade-details {
            margin-top: 1rem;
        }
        
        .upgrade-option {
            transition: all 0.3s ease;
            display: none;
        }
        
        .upgrade-option.active {
            display: block;
        }
        
        .upgrade-preview {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: rgba(58, 63, 80, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(194, 196, 202, 0.1);
        }
        
        .upgrade-img {
            width: 150px;
            height: 100px;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid rgba(218, 138, 103, 0.3);
        }
        
        .upgrade-info {
            flex: 1;
        }
        
        .upgrade-info h4 {
            color: #da8a67;
            margin-bottom: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .upgrade-info p {
            color: #9ca3af;
            font-size: 0.9rem;
            line-height: 1.4;
            margin: 0;
        }
        
        @media (max-width: 1024px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: relative;
                top: 0;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .container {
                padding: 1rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .upgrade-preview {
                flex-direction: column;
            }
            
            .upgrade-img {
                width: 100%;
                height: 120px;
            }
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">Freedom Cabins NZ</div>
            <div class="live-price" id="headerPrice">$0 inc GST</div>
        </div>
    </div>

    <div class="container">
        <div class="grid">
            <div class="main-content">
                <!-- Cabin Model Selection -->
                <div class="card">
                    <h2 class="section-title">🏠 Choose Your Cabin Model</h2>
                    
                    <div class="form-group">
                        <label class="form-label">Build Category</label>
                        <select class="form-select" id="buildCategory">
                            <option value="basic">Basic Build</option>
                            <option value="standard">Standard Build (+$15,000)</option>
                            <option value="superior">Superior Build (+$25,000)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cabin Model</label>
                        <select class="form-select" id="cabinModel">
                            <option value="">Choose a cabin model...</option>
                            <option value="8.4x3-1bed">8.4m x 3m - 1 Bedroom ($67,900)</option>
                            <option value="10x3-1bed">10m x 3m - 1 Bedroom ($81,900)</option>
                            <option value="10x3-1bed-ensuite">10m x 3m - 1 Bedroom En Suite ($82,900)</option>
                            <option value="10x3-2bed">10m x 3m - 2 Bedroom ($86,900)</option>
                            <option value="10.8x3-1bed">10.8m x 3m - 1 Bedroom ($97,900)</option>
                            <option value="10.8x3-2bed">10.8m x 3m - 2 Bedroom ($98,900)</option>
                            <option value="12x4-2bed">12m x 4m - 2 Bedroom ($125,900)</option>
                        </select>
                    </div>
                    
                    <div id="cabinSpecs" class="cabin-spec">
                        <div class="spec-title">Choose Your Cabin</div>
                        <div class="spec-details">
                            <strong>Step 1:</strong> Select a build category above<br>
                            <strong>Step 2:</strong> Choose your cabin model<br>
                            <strong>Step 3:</strong> Customize your upgrades
                        </div>
                    </div>
                </div>

                <!-- Features & Upgrades -->
                <div class="card">
                    <h2 class="section-title">⚡ Features & Upgrades</h2>
                    
                    <!-- Bathroom Package -->
                    <div class="upgrade-section">
                        <div class="form-group">
                            <label class="form-label">🚿 Bathroom Package</label>
                            <select class="form-select" id="bathroomPackage">
                                <option value="standard">Standard Bathroom (Free)</option>
                                <option value="deluxe">Deluxe Bathroom (+$3,500)</option>
                            </select>
                        </div>
                        
                        <div class="upgrade-details" id="bathroomDetails">
                            <div class="upgrade-option active" data-option="standard">
                                <div class="upgrade-preview">
                                    <img src="https://via.placeholder.com/150x100/5a5f80/c2c4ca?text=Standard+Bathroom" alt="Standard Bathroom" class="upgrade-img">
                                    <div class="upgrade-info">
                                        <h4>Standard Bathroom</h4>
                                        <p>Includes basic fixtures: toilet, vanity with mirror, shower, standard tiles, and essential plumbing fixtures.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="upgrade-option" data-option="deluxe">
                                <div class="upgrade-preview">
                                    <img src="https://via.placeholder.com/150x100/da8a67/ffffff?text=Deluxe+Bathroom" alt="Deluxe Bathroom" class="upgrade-img">
                                    <div class="upgrade-info">
                                        <h4>Deluxe Bathroom (+$3,500)</h4>
                                        <p>Premium fixtures: high-end toilet, designer vanity with LED mirror, rainfall shower head, premium tiles, heated towel rail, and luxury fittings.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Kitchen Package -->
                    <div class="upgrade-section">
                        <div class="form-group">
                            <label class="form-label">🍳 Kitchen Package</label>
                            <select class="form-select" id="kitchenPackage">
                                <option value="standard">Standard Kitchen (Free)</option>
                                <option value="deluxe">Deluxe Kitchen (+$4,200)</option>
                            </select>
                        </div>
                        
                        <div class="upgrade-details" id="kitchenDetails">
                            <div class="upgrade-option active" data-option="standard">
                                <div class="upgrade-preview">
                                    <img src="https://via.placeholder.com/150x100/5a5f80/c2c4ca?text=Standard+Kitchen" alt="Standard Kitchen" class="upgrade-img">
                                    <div class="upgrade-info">
                                        <h4>Standard Kitchen</h4>
                                        <p>Essential kitchen setup: basic cabinets, laminate benchtops, standard sink and tap, essential storage solutions.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="upgrade-option" data-option="deluxe">
                                <div class="upgrade-preview">
                                    <img src="https://via.placeholder.com/150x100/da8a67/ffffff?text=Deluxe+Kitchen" alt="Deluxe Kitchen" class="upgrade-img">
                                    <div class="upgrade-info">
                                        <h4>Deluxe Kitchen (+$4,200)</h4>
                                        <p>Premium kitchen package: designer cabinets, stone benchtops, premium sink and tap, soft-close drawers, under-cabinet lighting, wine rack.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cedar Panels -->
                    <div class="upgrade-section">
                        <div class="form-group">
                            <label class="form-label">🌲 Cedar Panel Cladding</label>
                            <select class="form-select" id="cedarPanels">
                                <option value="none">No Cedar Panels (Free)</option>
                                <option value="partial">Partial Cedar Panels (+$3,800)</option>
                                <option value="full">Full Cedar Cladding (+$7,500)</option>
                            </select>
                        </div>
                        
                        <div class="upgrade-details" id="cedarDetails">
                            <div class="upgrade-option active" data-option="none">
                                <div class="upgrade-preview">
                                    <img src="https://via.placeholder.com/150x100/5a5f80/c2c4ca?text=Standard+Cladding" alt="Standard Cladding" class="upgrade-img">
                                    <div class="upgrade-info">
                                        <h4>Standard Cladding</h4>
                                        <p>Quality weatherboard cladding with professional finish and long-lasting durability.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="upgrade-option" data-option="partial">
                                <div class="upgrade-preview">
                                    <img src="https://via.placeholder.com/150x100/da8a67/ffffff?text=Partial+Cedar" alt="Partial Cedar" class="upgrade-img">
                                    <div class="upgrade-info">
                                        <h4>Partial Cedar Panels (+$3,800)</h4>
                                        <p>Feature cedar panels on front facade for enhanced curb appeal and natural aesthetics.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="upgrade-option" data-option="full">
                                <div class="upgrade-preview">
                                    <img src="https://via.placeholder.com/150x100/c77a57/ffffff?text=Full+Cedar" alt="Full Cedar" class="upgrade-img">
                                    <div class="upgrade-info">
                                        <h4>Full Cedar Cladding (+$7,500)</h4>
                                        <p>Complete cedar cladding for ultimate natural beauty, superior insulation, and premium finish.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Other Upgrades -->
                    <div class="form-group">
                        <label class="form-label">🗄️ Storage Cupboards</label>
                        <select class="form-select" id="cupboards">
                            <option value="standard">Standard Cupboards</option>
                            <option value="premium">Premium Cupboards (+$2,800)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">🚪 Door Upgrades</label>
                        <select class="form-select" id="doorUpgrades">
                            <option value="none">No Door Upgrades (Free)</option>
                            <option value="1-barn">1 Barn Door (+$800)</option>
                            <option value="2-barn">2 Barn Doors (+$1,600)</option>
                            <option value="3-barn">3 Barn Doors (+$2,400)</option>
                            <option value="1-cavity">1 Cavity Slider (+$600)</option>
                            <option value="2-cavity">2 Cavity Sliders (+$1,200)</option>
                            <option value="3-cavity">3 Cavity Sliders (+$1,800)</option>
                        </select>
                    </div>
                </div>

                <!-- Delivery Options -->
                <div class="card">
                    <h2 class="section-title">🚚 Delivery</h2>
                    <div class="form-group">
                        <label class="form-label">Delivery Location</label>
                        <select class="form-select" id="deliveryLocation">
                            <option value="tauranga">Tauranga (Free)</option>
                            <option value="bop">Bay of Plenty (+$500)</option>
                            <option value="waikato">Waikato (+$800)</option>
                            <option value="auckland">Auckland (+$1,200)</option>
                            <option value="wellington">Wellington (+$2,000)</option>
                            <option value="christchurch">Christchurch (+$2,500)</option>
                            <option value="other">Other Location (+$1,500)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card quote-card">
                    <div class="cabin-preview">
                        <div class="preview-text">
                            <div style="font-weight: 600; margin-bottom: 0.5rem;">Your Custom Cabin</div>
                            <div id="cabinSummary">Select a cabin model to start</div>
                        </div>
                    </div>
                    
                    <div class="price-display" id="totalPrice">$0</div>
                    
                    <div class="price-breakdown" id="priceBreakdown">
                        <div class="price-item">
                            <span>Select a cabin model above</span>
                            <span>$0</span>
                        </div>
                        <div class="price-item">
                            <span><strong>Total (inc GST)</strong></span>
                            <span><strong>$0</strong></span>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="requestQuote()">Get Detailed Quote</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quote Modal -->
    <div id="quoteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Request Your Quote</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            
            <form id="quoteForm">
                <div class="form-group">
                    <label class="form-label">Full Name *</label>
                    <input type="text" class="form-input" name="Name" id="customerName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email Address *</label>
                    <input type="email" class="form-input" name="Email" id="customerEmail" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phone Number *</label>
                    <input type="tel" class="form-input" name="Phone" id="customerPhone" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Property Address</label>
                    <textarea class="form-input" name="Address" id="customerAddress" rows="2"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Additional Requirements</label>
                    <textarea class="form-input" name="Additional_Notes" id="additionalNotes" rows="3" placeholder="Any special requirements or questions..."></textarea>
                </div>
                
                <!-- Hidden fields for quote details -->
                <input type="hidden" name="Total_Price" id="hiddenQuoteTotal">
                <input type="hidden" name="Cabin_Model" id="hiddenCabinModel">
                <input type="hidden" name="Build_Category" id="hiddenBuildCategory">
                <input type="hidden" name="Quote_Details" id="hiddenQuoteBreakdown">
                
                <button type="submit" class="btn">Send Quote Request</button>
            </form>
        </div>
    </div>

    <script>
        // Cabin models data
        const cabinModels = {
            '8.4x3-1bed': {
                name: '8.4m x 3m - 1 Bedroom',
                price: 67900,
                size: '25.2m²',
                description: 'Compact 1 bedroom cabin perfect for individuals or couples'
            },
            '10x3-1bed': {
                name: '10m x 3m - 1 Bedroom',
                price: 81900,
                size: '30m²',
                description: 'Spacious 1 bedroom layout with additional living space'
            },
            '10x3-1bed-ensuite': {
                name: '10m x 3m - 1 Bedroom En Suite',
                price: 82900,
                size: '30m²',
                description: '1 bedroom with private ensuite bathroom for added convenience'
            },
            '10x3-2bed': {
                name: '10m x 3m - 2 Bedroom',
                price: 86900,
                size: '30m²',
                description: 'Efficient 2 bedroom design ideal for small families'
            },
            '10.8x3-1bed': {
                name: '10.8m x 3m - 1 Bedroom',
                price: 97900,
                size: '32.4m²',
                description: 'Premium 1 bedroom cabin with maximum living space'
            },
            '10.8x3-2bed': {
                name: '10.8m x 3m - 2 Bedroom',
                price: 98900,
                size: '32.4m²',
                description: 'Comfortable 2 bedroom layout with ample space'
            },
            '12x4-2bed': {
                name: '12m x 4m - 2 Bedroom',
                price: 125900,
                size: '48m²',
                description: 'Spacious family cabin with generous living areas'
            }
        };

        // Build category upgrades
        const buildUpgrades = {
            'basic': 0,
            'standard': 15000,
            'superior': 25000
        };

        // Current configuration
        let currentConfig = {
            buildCategory: 'basic',
            model: '',
            bathroom: 'standard',
            kitchen: 'standard',
            cedar: 'none',
            cupboards: 'standard',
            doors: 'none',
            delivery: 'tauranga'
        };

        // Initialize when page loads
        window.addEventListener('load', function() {
            loadCabinModels();
            setupEventListeners();
            updateDisplay();
        });

        function updateUpgradeDisplay(upgradeType, selectedValue) {
            let containerId, options;
            
            switch(upgradeType) {
                case 'bathroom':
                    containerId = 'bathroomDetails';
                    break;
                case 'kitchen':
                    containerId = 'kitchenDetails';
                    break;
                case 'cedar':
                    containerId = 'cedarDetails';
                    break;
            }
            
            if (containerId) {
                const container = document.getElementById(containerId);
                if (container) {
                    // Hide all options
                    const allOptions = container.querySelectorAll('.upgrade-option');
                    allOptions.forEach(option => {
                        option.classList.remove('active');
                    });
                    
                    // Show selected option
                    const selectedOption = container.querySelector(`[data-option="${selectedValue}"]`);
                    if (selectedOption) {
                        selectedOption.classList.add('active');
                    }
                }
            }
        }

        function loadCabinModels() {
            const select = document.getElementById('cabinModel');
            select.innerHTML = '<option value="">Choose a cabin model...</option>';

            Object.keys(cabinModels).forEach(key => {
                const model = cabinModels[key];
                const basePrice = model.price + buildUpgrades[currentConfig.buildCategory];
                
                const option = document.createElement('option');
                option.value = key;
                option.textContent = `${model.name} ($${basePrice.toLocaleString()})`;
                select.appendChild(option);
            });
        }

        function setupEventListeners() {
            document.getElementById('buildCategory').addEventListener('change', function() {
                currentConfig.buildCategory = this.value;
                loadCabinModels();
                updateDisplay();
            });

            document.getElementById('cabinModel').addEventListener('change', function() {
                currentConfig.model = this.value;
                updateDisplay();
            });

            document.getElementById('bathroomPackage').addEventListener('change', function() {
                currentConfig.bathroom = this.value;
                updateUpgradeDisplay('bathroom', this.value);
                updateDisplay();
            });

            document.getElementById('kitchenPackage').addEventListener('change', function() {
                currentConfig.kitchen = this.value;
                updateUpgradeDisplay('kitchen', this.value);
                updateDisplay();
            });

            document.getElementById('cedarPanels').addEventListener('change', function() {
                currentConfig.cedar = this.value;
                updateUpgradeDisplay('cedar', this.value);
                updateDisplay();
            });

            document.getElementById('cupboards').addEventListener('change', function() {
                currentConfig.cupboards = this.value;
                updateDisplay();
            });

            document.getElementById('doorUpgrades').addEventListener('change', function() {
                currentConfig.doors = this.value;
                updateDisplay();
            });

            document.getElementById('deliveryLocation').addEventListener('change', function() {
                currentConfig.delivery = this.value;
                updateDisplay();
            });
        }

        function updateDisplay() {
            if (!currentConfig.model) {
                document.getElementById('cabinSummary').textContent = 'Select a cabin model';
                document.getElementById('totalPrice').textContent = '$0';
                document.getElementById('headerPrice').textContent = '$0 inc GST';
                document.getElementById('cabinSpecs').innerHTML = `
                    <div class="spec-title">Choose Your Cabin</div>
                    <div class="spec-details">
                        <strong>Step 1:</strong> Select a build category above<br>
                        <strong>Step 2:</strong> Choose your cabin model<br>
                        <strong>Step 3:</strong> Customize your upgrades
                    </div>
                `;
                return;
            }

            const model = cabinModels[currentConfig.model];
            const buildUpgrade = buildUpgrades[currentConfig.buildCategory];
            
            // Calculate total price
            let total = model.price + buildUpgrade;
            let breakdown = [];

            // Base price
            const buildCategoryName = document.getElementById('buildCategory').options[document.getElementById('buildCategory').selectedIndex].text;
            breakdown.push({
                name: `${model.name} - ${buildCategoryName}`,
                price: model.price + buildUpgrade
            });

            // Add upgrades
            if (currentConfig.bathroom === 'deluxe') {
                total += 3500;
                breakdown.push({ name: 'Deluxe Bathroom Package', price: 3500 });
            }

            if (currentConfig.kitchen === 'deluxe') {
                total += 4200;
                breakdown.push({ name: 'Deluxe Kitchen Package', price: 4200 });
            }

            if (currentConfig.cedar === 'partial') {
                total += 3800;
                breakdown.push({ name: 'Partial Cedar Panels', price: 3800 });
            } else if (currentConfig.cedar === 'full') {
                total += 7500;
                breakdown.push({ name: 'Full Cedar Cladding', price: 7500 });
            }

            if (currentConfig.cupboards === 'premium') {
                total += 2800;
                breakdown.push({ name: 'Premium Cupboards', price: 2800 });
            }

            // Door upgrades
            const doorPrices = {
                '1-barn': 800, '2-barn': 1600, '3-barn': 2400,
                '1-cavity': 600, '2-cavity': 1200, '3-cavity': 1800
            };

            if (currentConfig.doors !== 'none' && doorPrices[currentConfig.doors]) {
                const doorName = currentConfig.doors.includes('barn') ? 
                    currentConfig.doors.replace('-', ' ').replace('barn', 'Barn Door(s)') :
                    currentConfig.doors.replace('-', ' ').replace('cavity', 'Cavity Slider(s)');
                
                breakdown.push({ 
                    name: doorName.charAt(0).toUpperCase() + doorName.slice(1), 
                    price: doorPrices[currentConfig.doors] 
                });
                total += doorPrices[currentConfig.doors];
            }

            // Delivery
            const deliveryPrices = {
                'tauranga': 0, 'bop': 500, 'waikato': 800, 'auckland': 1200,
                'wellington': 2000, 'christchurch': 2500, 'other': 1500
            };
            
            const deliveryPrice = deliveryPrices[currentConfig.delivery];
            if (deliveryPrice > 0) {
                const locationName = currentConfig.delivery.charAt(0).toUpperCase() + currentConfig.delivery.slice(1);
                breakdown.push({ name: `Delivery to ${locationName}`, price: deliveryPrice });
                total += deliveryPrice;
            }

            // Update displays
            document.getElementById('totalPrice').textContent = '$' + total.toLocaleString();
            document.getElementById('headerPrice').textContent = '$' + total.toLocaleString() + ' inc GST';
            document.getElementById('cabinSummary').textContent = `${model.name} - ${buildCategoryName}`;

            // Update cabin specs
            document.getElementById('cabinSpecs').innerHTML = `
                <div class="spec-title">${model.name} - ${model.size}</div>
                <div class="spec-details">
                    <strong>Base Price:</strong> $${(model.price + buildUpgrade).toLocaleString()} inc GST<br>
                    <strong>Build Category:</strong> ${buildCategoryName}<br>
                    <strong>Description:</strong> ${model.description}<br>
                    <strong>Total Price:</strong> $${total.toLocaleString()} inc GST
                </div>
            `;

            // Update price breakdown
            const breakdownDiv = document.getElementById('priceBreakdown');
            breakdownDiv.innerHTML = '';
            
            breakdown.forEach(item => {
                const div = document.createElement('div');
                div.className = 'price-item';
                div.innerHTML = `<span>${item.name}</span><span>$${item.price.toLocaleString()}</span>`;
                breakdownDiv.appendChild(div);
            });

            // Add total row
            const totalDiv = document.createElement('div');
            totalDiv.className = 'price-item';
            totalDiv.innerHTML = `<span><strong>Total (inc GST)</strong></span><span><strong>$${total.toLocaleString()}</strong></span>`;
            breakdownDiv.appendChild(totalDiv);
        }

        function requestQuote() {
            if (!currentConfig.model) {
                alert('Please select a cabin model before requesting a quote.');
                return;
            }
            
            // Populate hidden fields
            document.getElementById('hiddenQuoteTotal').value = document.getElementById('totalPrice').textContent;
            document.getElementById('hiddenCabinModel').value = currentConfig.model ? cabinModels[currentConfig.model].name : '';
            document.getElementById('hiddenBuildCategory').value = document.getElementById('buildCategory').options[document.getElementById('buildCategory').selectedIndex].text;
            
            // Create breakdown text
            const breakdownItems = document.querySelectorAll('.price-item');
            let breakdownText = 'QUOTE BREAKDOWN:\n\n';
            breakdownItems.forEach(item => {
                breakdownText += item.textContent.replace(/\s+/g, ' ') + '\n';
            });
            document.getElementById('hiddenQuoteBreakdown').value = breakdownText;
            
            // Show modal
            document.getElementById('quoteModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('quoteModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close modal when clicking outside
        document.getElementById('quoteModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Form submission - Multiple methods
        document.getElementById('quoteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const submitBtn = e.target.querySelector('.btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Processing...';
            submitBtn.disabled = true;
            
            // Show submission options
            showSubmissionOptions();
            
            setTimeout(() => {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }, 2000);
        });
        
        // Show submission options
        function showSubmissionOptions() {
            const modal = document.getElementById('quoteModal');
            const modalContent = modal.querySelector('.modal-content');
            
            modalContent.innerHTML = `
                <div class="modal-header">
                    <h3 class="modal-title">Send Your Quote Request</h3>
                    <button class="close-btn" onclick="closeModal()">&times;</button>
                </div>
                
                <div style="text-align: center; margin-bottom: 20px;">
                    <p style="color: #c2c4ca; margin-bottom: 20px;">Choose how you'd like to send your quote:</p>
                </div>
                
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <button onclick="sendViaEmail()" class="btn" style="background: #ea4335;">
                        📧 Email Quote Directly
                    </button>
                    
                    <button onclick="downloadQuote()" class="btn" style="background: #34a853;">
                        📥 Download Quote Details
                    </button>
                    
                    <button onclick="copyQuoteToClipboard()" class="btn" style="background: #4285f4;">
                        📋 Copy to Clipboard
                    </button>
                    
                    <button onclick="sendViaWhatsApp()" class="btn" style="background: #25d366;">
                        💬 Send via WhatsApp
                    </button>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: rgba(58, 63, 80, 0.3); border-radius: 8px; text-align: center;">
                    <p style="color: #9ca3af; font-size: 0.9rem; margin: 0;">
                        All methods send to: <strong>info@freedomcabinsnz.com</strong>
                    </p>
                </div>
            `;
        }
        
        // Email method
        function sendViaEmail() {
            const quoteData = getQuoteData();
            const subject = encodeURIComponent('🏠 Cabin Quote Request - Freedom Cabins NZ');
            const body = encodeURIComponent(quoteData.fullQuote);
            
            window.location.href = `mailto:info@freedomcabinsnz.com?subject=${subject}&body=${body}`;
            
            showSuccessMessage('Opening your email client...');
            setTimeout(closeModal, 2000);
        }
        
        // Download method
        function downloadQuote() {
            const quoteData = getQuoteData();
            
            const blob = new Blob([quoteData.fullQuote], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Freedom-Cabins-Quote-${quoteData.customerName.replace(/\s+/g, '-')}-${new Date().getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showSuccessMessage('Quote downloaded! Please email to info@freedomcabinsnz.com');
            setTimeout(closeModal, 3000);
        }
        
        // Copy to clipboard
        function copyQuoteToClipboard() {
            const quoteData = getQuoteData();
            
            navigator.clipboard.writeText(quoteData.fullQuote).then(() => {
                showSuccessMessage('Quote copied! Paste into your email to info@freedomcabinsnz.com');
                setTimeout(closeModal, 3000);
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = quoteData.fullQuote;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                showSuccessMessage('Quote copied! Paste into your email');
                setTimeout(closeModal, 3000);
            });
        }
        
        // WhatsApp method
        function sendViaWhatsApp() {
            const quoteData = getQuoteData();
            
            // Format for WhatsApp (shorter version)
            const whatsappMessage = `Hi Freedom Cabins NZ! 

I'd like a quote for:
${quoteData.cabinModel}
Build: ${quoteData.buildCategory}
Total: ${quoteData.quoteTotal}

Contact: ${quoteData.customerName}
Email: ${quoteData.customerEmail}
Phone: ${quoteData.customerPhone}`;
            
            const whatsappNumber = '64123456789'; // Replace with your WhatsApp Business number
            const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(whatsappMessage)}`;
            
            window.open(whatsappURL, '_blank');
            showSuccessMessage('Opening WhatsApp...');
            setTimeout(closeModal, 2000);
        }
        
        // Get formatted quote data
        function getQuoteData() {
            const customerName = document.getElementById('customerName').value;
            const customerEmail = document.getElementById('customerEmail').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const customerAddress = document.getElementById('customerAddress').value;
            const additionalNotes = document.getElementById('additionalNotes').value;
            const quoteTotal = document.getElementById('hiddenQuoteTotal').value;
            const cabinModel = document.getElementById('hiddenCabinModel').value;
            const buildCategory = document.getElementById('hiddenBuildCategory').value;
            const quoteBreakdown = document.getElementById('hiddenQuoteBreakdown').value;
            
            const configuration = {
                'Bathroom': currentConfig.bathroom === 'deluxe' ? 'Deluxe Package' : 'Standard',
                'Kitchen': currentConfig.kitchen === 'deluxe' ? 'Deluxe Package' : 'Standard',
                'Cedar Panels': currentConfig.cedar === 'none' ? 'None' : 
                               currentConfig.cedar === 'partial' ? 'Partial Cedar' : 'Full Cedar',
                'Cupboards': currentConfig.cupboards === 'premium' ? 'Premium' : 'Standard',
                'Doors': currentConfig.doors === 'none' ? 'Standard' : currentConfig.doors,
                'Delivery': currentConfig.delivery.charAt(0).toUpperCase() + currentConfig.delivery.slice(1)
            };
            
            let configText = '';
            for (const [key, value] of Object.entries(configuration)) {
                configText += `${key}: ${value}\n`;
            }
            
            const fullQuote = `🏠 FREEDOM CABINS NZ - QUOTE REQUEST
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

CUSTOMER DETAILS:
Name: ${customerName}
Email: ${customerEmail}
Phone: ${customerPhone}
Address: ${customerAddress || 'Not provided'}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
${quoteBreakdown}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

CONFIGURATION DETAILS:
Cabin Model: ${cabinModel}
Build Category: ${buildCategory}
${configText}

ADDITIONAL NOTES:
${additionalNotes || 'None provided'}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Generated: ${new Date().toLocaleString('en-NZ')}
Via: Freedom Cabins NZ Configurator

Please respond to: ${customerEmail}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━`;

            return {
                customerName,
                customerEmail,
                customerPhone,
                customerAddress,
                additionalNotes,
                quoteTotal,
                cabinModel,
                buildCategory,
                quoteBreakdown,
                fullQuote
            };
        }
        
        // Success message
        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 20px 25px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
                z-index: 9999;
                font-weight: 600;
                max-width: 350px;
                animation: slideIn 0.3s ease-out;
                font-family: 'Montserrat', sans-serif;
            `;
            
            successDiv.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 24px;">✅</span>
                    <div>
                        <div style="font-size: 16px; margin-bottom: 5px;">${message}</div>
                        <div style="font-size: 14px; opacity: 0.9;">We'll respond within 1 hour</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 5000);
        }
    </script>
</body>
</html>
